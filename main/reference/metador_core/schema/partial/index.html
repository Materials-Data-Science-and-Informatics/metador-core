
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Core of Metador, the metadata-first research data management framework.">
      
      
      
        <link rel="canonical" href="https://materials-data-science-and-informatics.github.io/metador-core/main/reference/metador_core/schema/partial/">
      
      
        <link rel="prev" href="../parser/">
      
      
        <link rel="next" href="../pg/">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.1, mkdocs-material-9.1.21">
    
    
      
        <title>partial - metador-core</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../css/style.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#metador_core.schema.partial" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  This page is for an outdated or development version.
  <a href="../../../../..">
    <strong>Click here to go to the latest stable version.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="metador-core" class="md-header__button md-logo" aria-label="metador-core" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            metador-core
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              partial
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Materials-Data-Science-and-Informatics/metador-core" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Materials-Data-Science-and-Informatics/metador-core
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../quickstart/" class="md-tabs__link md-tabs__link--active">
        Usage
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../contributing/" class="md-tabs__link">
        Development
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="metador-core" class="md-nav__button md-logo" aria-label="metador-core" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    metador-core
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Materials-Data-Science-and-Informatics/metador-core" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Materials-Data-Science-and-Informatics/metador-core
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Notebooks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Notebooks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../notebooks/about/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../notebooks/01_MetadorContainer/" class="md-nav__link">
        Creating a MetadorContainer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../notebooks/02_YourFirstMetadorPlugin/" class="md-nav__link">
        Writing Metador Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../notebooks/03_Schemas/" class="md-nav__link">
        Designing Metadata Schemas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../notebooks/03b_SemanticsInteroperability/" class="md-nav__link">
        Semantics and Interoperability
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1" checked>
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">metador_core</a>
          
            <label for="__nav_2_3_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_3_1">
          <span class="md-nav__icon md-icon"></span>
          metador_core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../container/">container</a>
          
            <label for="__nav_2_3_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1_1">
          <span class="md-nav__icon md-icon"></span>
          container
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../container/drivers/" class="md-nav__link">
        drivers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../container/interface/" class="md-nav__link">
        interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../container/protocols/" class="md-nav__link">
        protocols
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../container/provider/" class="md-nav__link">
        provider
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../container/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../container/wrappers/" class="md-nav__link">
        wrappers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_2" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../harvester/">harvester</a>
          
            <label for="__nav_2_3_1_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1_2">
          <span class="md-nav__icon md-icon"></span>
          harvester
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../harvester/common/" class="md-nav__link">
        common
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../ih5/">ih5</a>
          
            <label for="__nav_2_3_1_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1_3">
          <span class="md-nav__icon md-icon"></span>
          ih5
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ih5/container/" class="md-nav__link">
        container
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ih5/manifest/" class="md-nav__link">
        manifest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ih5/overlay/" class="md-nav__link">
        overlay
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ih5/record/" class="md-nav__link">
        record
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ih5/skeleton/" class="md-nav__link">
        skeleton
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_4" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../packer/">packer</a>
          
            <label for="__nav_2_3_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1_4">
          <span class="md-nav__icon md-icon"></span>
          packer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packer/example/" class="md-nav__link">
        example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packer/types/" class="md-nav__link">
        types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packer/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_5" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../plugin/">plugin</a>
          
            <label for="__nav_2_3_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1_5">
          <span class="md-nav__icon md-icon"></span>
          plugin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/entrypoints/" class="md-nav__link">
        entrypoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/interface/" class="md-nav__link">
        interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/metaclass/" class="md-nav__link">
        metaclass
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/types/" class="md-nav__link">
        types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plugin/util/" class="md-nav__link">
        util
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/" class="md-nav__link">
        plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_7" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../rdf/">rdf</a>
          
            <label for="__nav_2_3_1_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1_7">
          <span class="md-nav__icon md-icon"></span>
          rdf
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rdf/lib/" class="md-nav__link">
        lib
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rdf/skos/" class="md-nav__link">
        skos
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_8" checked>
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">schema</a>
          
            <label for="__nav_2_3_1_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_8_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_3_1_8">
          <span class="md-nav__icon md-icon"></span>
          schema
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../base/" class="md-nav__link">
        base
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_8_2" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../common/">common</a>
          
            <label for="__nav_2_3_1_8_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_3_1_8_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1_8_2">
          <span class="md-nav__icon md-icon"></span>
          common
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../common/rocrate/" class="md-nav__link">
        rocrate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../common/schemaorg/" class="md-nav__link">
        schemaorg
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../decorators/" class="md-nav__link">
        decorators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../encoder/" class="md-nav__link">
        encoder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../inspect/" class="md-nav__link">
        inspect
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jsonschema/" class="md-nav__link">
        jsonschema
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ld/" class="md-nav__link">
        ld
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../parser/" class="md-nav__link">
        parser
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          partial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        partial
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#metador_core.schema.partial" class="md-nav__link">
    metador_core.schema.partial
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel" class="md-nav__link">
    PartialModel
  </a>
  
    <nav class="md-nav" aria-label="PartialModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.__partial_src__" class="md-nav__link">
    __partial_src__
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.__partial_fac__" class="md-nav__link">
    __partial_fac__
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.from_partial" class="md-nav__link">
    from_partial()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.to_partial" class="md-nav__link">
    to_partial()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.cast" class="md-nav__link">
    cast()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.merge_with" class="md-nav__link">
    merge_with()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.merge" class="md-nav__link">
    merge()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialFactory" class="md-nav__link">
    PartialFactory
  </a>
  
    <nav class="md-nav" aria-label="PartialFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialFactory.get_partial" class="md-nav__link">
    get_partial()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metador_core.schema.partial.is_mergeable_type" class="md-nav__link">
    is_mergeable_type()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metador_core.schema.partial.val_from_partial" class="md-nav__link">
    val_from_partial()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pg/" class="md-nav__link">
        pg
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        types
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_9" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../util/">util</a>
          
            <label for="__nav_2_3_1_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1_9">
          <span class="md-nav__icon md-icon"></span>
          util
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../util/diff/" class="md-nav__link">
        diff
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../util/enum/" class="md-nav__link">
        enum
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../util/hashsums/" class="md-nav__link">
        hashsums
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../util/models/" class="md-nav__link">
        models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../util/pytest/" class="md-nav__link">
        pytest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../util/typing/" class="md-nav__link">
        typing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_10" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../widget/">widget</a>
          
            <label for="__nav_2_3_1_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1_10">
          <span class="md-nav__icon md-icon"></span>
          widget
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../widget/common/" class="md-nav__link">
        common
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../widget/dashboard/" class="md-nav__link">
        dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_10_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../widget/jupyter/">jupyter</a>
          
            <label for="__nav_2_3_1_10_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_3_1_10_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1_10_3">
          <span class="md-nav__icon md-icon"></span>
          jupyter
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../widget/jupyter/standalone/" class="md-nav__link">
        standalone
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../widget/server/" class="md-nav__link">
        server
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing/" class="md-nav__link">
        How To Contribute
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../dev_guide/" class="md-nav__link">
        Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../code_of_conduct/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../coverage/" class="md-nav__link">
        Coverage Report
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#metador_core.schema.partial" class="md-nav__link">
    metador_core.schema.partial
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel" class="md-nav__link">
    PartialModel
  </a>
  
    <nav class="md-nav" aria-label="PartialModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.__partial_src__" class="md-nav__link">
    __partial_src__
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.__partial_fac__" class="md-nav__link">
    __partial_fac__
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.from_partial" class="md-nav__link">
    from_partial()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.to_partial" class="md-nav__link">
    to_partial()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.cast" class="md-nav__link">
    cast()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.merge_with" class="md-nav__link">
    merge_with()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialModel.merge" class="md-nav__link">
    merge()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialFactory" class="md-nav__link">
    PartialFactory
  </a>
  
    <nav class="md-nav" aria-label="PartialFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metador_core.schema.partial.PartialFactory.get_partial" class="md-nav__link">
    get_partial()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metador_core.schema.partial.is_mergeable_type" class="md-nav__link">
    is_mergeable_type()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metador_core.schema.partial.val_from_partial" class="md-nav__link">
    val_from_partial()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/Materials-Data-Science-and-Informatics/metador-core/blob/main/docs/src/metador_core/schema/partial.py" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/Materials-Data-Science-and-Informatics/metador-core/raw/main/docs/src/metador_core/schema/partial.py" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


  <h1>partial</h1>

<div class="doc doc-object doc-module">


<a id="metador_core.schema.partial"></a>
  <div class="doc doc-contents first">
  
      <p>Partial pydantic models.</p>
<p>Partial models replicate another model with all fields made optional.
However, they cannot be part of the inheritance chain of the original
models, because semantically it does not make sense or leads to
a diamond problem.</p>
<p>Therefore they are independent models, unrelated to the original
models, but convertable through methods.</p>
<p>Partial models are implemented as a mixin class to be combined
with the top level base model that you are using in your model
hierarchy, e.g. if you use plain <code>BaseModel</code>, you can e.g. define:</p>
<div class="highlight"><pre><span></span><code>class MyPartial(DeepPartialModel, BaseModel): ...
</code></pre></div>
<p>And use <code>MyPartial.get_partial</code> on your models.</p>
<p>If different compatible model instances are merged,
the merge will produce an instance of the left type.</p>
<p>Some theory - partial schemas form a monoid with:
* the empty partial schema as neutral element
* merge of the fields as the binary operation
* associativity follows from associativity of used merge operations</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="metador_core.schema.partial.PartialModel" class="doc doc-heading">
          <span class="doc doc-object-name doc-class-name">PartialModel</span>


<a href="#metador_core.schema.partial.PartialModel" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Base partial metadata model mixin.</p>
<p>In this variant merging is done by simply overwriting old field values
with new values (if the new value is not <code>None</code>) in a shallow way.</p>
<p>For more fancy merging, consider <code>DeepPartialModel</code>.</p>

            <details class="quote">
              <summary>Source code in <code>src/metador_core/schema/partial.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PartialModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base partial metadata model mixin.</span>

<span class="sd">    In this variant merging is done by simply overwriting old field values</span>
<span class="sd">    with new values (if the new value is not `None`) in a shallow way.</span>

<span class="sd">    For more fancy merging, consider `DeepPartialModel`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__partial_src__</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Original model class this partial class is based on.&quot;&quot;&quot;</span>

    <span class="n">__partial_fac__</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">PartialFactory</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory class that created this partial.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">from_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new non-partial model instance (will run full validation).</span>

<span class="sd">        Raises ValidationError on failure (e.g. if the partial is missing fields).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">val_from_partial</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_fac__</span><span class="o">.</span><span class="n">_get_field_vals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_src__</span><span class="o">.</span><span class="n">parse_obj</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">to_partial</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">ignore_invalid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Transform `obj` into a new instance of this partial model.</span>

<span class="sd">        If passed object is instance of (a subclass of) this or the original model,</span>
<span class="sd">        no validation is performed.</span>

<span class="sd">        Returns partial instance with the successfully parsed fields.</span>

<span class="sd">        Raises ValidationError if parsing fails.</span>
<span class="sd">        (usless ignore_invalid is set by default or passed).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__partial_src__</span><span class="p">)):</span>
            <span class="c1"># safe, because subclasses are &quot;stricter&quot;</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span><span class="o">**</span><span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="n">ignore_invalid</span><span class="p">:</span>
            <span class="c1"># validate data and keep only valid fields</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">validate_model</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span><span class="n">_fields_set</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="c1"># parse a dict or another pydantic model</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_obj</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">cast</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">PartialModel</span><span class="p">],</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">ignore_invalid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cast given object into this partial model if needed.</span>

<span class="sd">        If it already is an instance, will do nothing.</span>
<span class="sd">        Otherwise, will call `to_partial`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">to_partial</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ignore_invalid</span><span class="o">=</span><span class="n">ignore_invalid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_field</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">v_old</span><span class="p">,</span>
        <span class="n">v_new</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">allow_overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return merged result of the two passed arguments.</span>

<span class="sd">        None is always overwritten by a non-None value,</span>
<span class="sd">        lists are concatenated, sets are unionized,</span>
<span class="sd">        partial models are recursively merged,</span>
<span class="sd">        otherwise the new value overwrites the old one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">path</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="c1"># None -&gt; missing value -&gt; just use new value (shortcut)</span>
        <span class="k">if</span> <span class="n">v_old</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">v_new</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">v_new</span> <span class="ow">or</span> <span class="n">v_old</span>

        <span class="c1"># list -&gt; new one must also be a list -&gt; concatenate</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v_old</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">v_old</span> <span class="o">+</span> <span class="n">v_new</span>

        <span class="c1"># set -&gt; new one must also be a set -&gt; set union</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v_old</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
            <span class="c1"># NOTE: we could try being smarter for sets of partial models</span>
            <span class="c1"># https://github.com/Materials-Data-Science-and-Informatics/metador-core/issues/20</span>
            <span class="k">return</span> <span class="n">v_old</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">v_new</span><span class="p">)</span>  <span class="c1"># set union</span>

        <span class="c1"># another model -&gt; recursive merge of partials, if compatible</span>
        <span class="n">old_is_model</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v_old</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_fac__</span><span class="o">.</span><span class="n">base_model</span><span class="p">)</span>
        <span class="n">new_is_model</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v_new</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_fac__</span><span class="o">.</span><span class="n">base_model</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">old_is_model</span> <span class="ow">and</span> <span class="n">new_is_model</span><span class="p">:</span>
            <span class="n">v_old_p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_fac__</span><span class="o">.</span><span class="n">get_partial</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v_old</span><span class="p">))</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">v_old</span><span class="p">)</span>
            <span class="n">v_new_p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_fac__</span><span class="o">.</span><span class="n">get_partial</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v_new</span><span class="p">))</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">v_new</span><span class="p">)</span>
            <span class="n">new_subclass_old</span> <span class="o">=</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v_new_p</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">v_old_p</span><span class="p">))</span>
            <span class="n">old_subclass_new</span> <span class="o">=</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v_old_p</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">v_new_p</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">new_subclass_old</span> <span class="ow">or</span> <span class="n">old_subclass_new</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">v_old_p</span><span class="o">.</span><span class="n">merge_with</span><span class="p">(</span>
                        <span class="n">v_new_p</span><span class="p">,</span> <span class="n">allow_overwrite</span><span class="o">=</span><span class="n">allow_overwrite</span><span class="p">,</span> <span class="n">_path</span><span class="o">=</span><span class="n">path</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="n">ValidationError</span><span class="p">:</span>
                    <span class="c1"># casting failed -&gt; proceed to next merge variant</span>
                    <span class="c1"># TODO: maybe raise unless &quot;ignore invalid&quot;?</span>
                    <span class="k">pass</span>

        <span class="c1"># if we&#39;re here, treat it as an opaque value</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">allow_overwrite</span><span class="p">:</span>
            <span class="n">msg_title</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t overwrite (allow_overwrite=False) at </span><span class="si">{</span><span class="s1">&#39; -&gt; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="si">}</span><span class="s2">:&quot;</span>
            <span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_title</span><span class="si">}</span><span class="se">\n\t</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">v_old</span><span class="p">)</span><span class="si">}</span><span class="se">\n\t</span><span class="s2">with</span><span class="se">\n\t</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">v_new</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v_new</span>

    <span class="k">def</span> <span class="nf">merge_with</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">obj</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">ignore_invalid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">allow_overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new partial model with updated fields (without validation).</span>

<span class="sd">        Raises `ValidationError` if passed `obj` is not suitable,</span>
<span class="sd">        unless `ignore_invalid` is set to `True`.</span>

<span class="sd">        Raises `ValueError` if `allow_overwrite=False` and a value would be overwritten.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_path</span> <span class="o">=</span> <span class="n">_path</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ignore_invalid</span><span class="o">=</span><span class="n">ignore_invalid</span><span class="p">)</span>  <span class="c1"># raises on failure</span>

        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
        <span class="k">for</span> <span class="n">f_name</span><span class="p">,</span> <span class="n">v_new</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_fac__</span><span class="o">.</span><span class="n">_get_field_vals</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="n">v_old</span> <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f_name</span><span class="p">)</span>
            <span class="n">v_merged</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_field</span><span class="p">(</span>
                <span class="n">v_old</span><span class="p">,</span> <span class="n">v_new</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">_path</span> <span class="o">+</span> <span class="p">[</span><span class="n">f_name</span><span class="p">],</span> <span class="n">allow_overwrite</span><span class="o">=</span><span class="n">allow_overwrite</span>
            <span class="p">)</span>
            <span class="n">ret</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">f_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v_merged</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">objs</span><span class="p">:</span> <span class="n">PartialModel</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartialModel</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge all passed partial models in given order using `merge_with`.&quot;&quot;&quot;</span>
        <span class="c1"># sadly it looks like *args and named kwargs (,*,) syntax cannot be mixed</span>
        <span class="n">ignore_invalid</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ignore_invalid&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">allow_overwrite</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;allow_overwrite&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">objs</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">merge_two</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">merge_with</span><span class="p">(</span>
                <span class="n">y</span><span class="p">,</span> <span class="n">ignore_invalid</span><span class="o">=</span><span class="n">ignore_invalid</span><span class="p">,</span> <span class="n">allow_overwrite</span><span class="o">=</span><span class="n">allow_overwrite</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">reduce</span><span class="p">(</span><span class="n">merge_two</span><span class="p">,</span> <span class="n">objs</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="metador_core.schema.partial.PartialModel.__partial_src__" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">__partial_src__</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#metador_core.schema.partial.PartialModel.__partial_src__" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">__partial_src__</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Original model class this partial class is based on.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="metador_core.schema.partial.PartialModel.__partial_fac__" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">__partial_fac__</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#metador_core.schema.partial.PartialModel.__partial_fac__" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">__partial_fac__</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">PartialFactory</span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Factory class that created this partial.</p>
  </div>

</div>




<div class="doc doc-object doc-function">



<h3 id="metador_core.schema.partial.PartialModel.from_partial" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">from_partial</span>


<a href="#metador_core.schema.partial.PartialModel.from_partial" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">from_partial</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Return a new non-partial model instance (will run full validation).</p>
<p>Raises ValidationError on failure (e.g. if the partial is missing fields).</p>

          <details class="quote">
            <summary>Source code in <code>src/metador_core/schema/partial.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">from_partial</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a new non-partial model instance (will run full validation).</span>

<span class="sd">    Raises ValidationError on failure (e.g. if the partial is missing fields).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">k</span><span class="p">:</span> <span class="n">val_from_partial</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_fac__</span><span class="o">.</span><span class="n">_get_field_vals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_src__</span><span class="o">.</span><span class="n">parse_obj</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="metador_core.schema.partial.PartialModel.to_partial" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">to_partial</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#metador_core.schema.partial.PartialModel.to_partial" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">to_partial</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">ignore_invalid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Transform <code>obj</code> into a new instance of this partial model.</p>
<p>If passed object is instance of (a subclass of) this or the original model,
no validation is performed.</p>
<p>Returns partial instance with the successfully parsed fields.</p>
<p>Raises ValidationError if parsing fails.
(usless ignore_invalid is set by default or passed).</p>

          <details class="quote">
            <summary>Source code in <code>src/metador_core/schema/partial.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">to_partial</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">ignore_invalid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transform `obj` into a new instance of this partial model.</span>

<span class="sd">    If passed object is instance of (a subclass of) this or the original model,</span>
<span class="sd">    no validation is performed.</span>

<span class="sd">    Returns partial instance with the successfully parsed fields.</span>

<span class="sd">    Raises ValidationError if parsing fails.</span>
<span class="sd">    (usless ignore_invalid is set by default or passed).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__partial_src__</span><span class="p">)):</span>
        <span class="c1"># safe, because subclasses are &quot;stricter&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span><span class="o">**</span><span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">if</span> <span class="n">ignore_invalid</span><span class="p">:</span>
        <span class="c1"># validate data and keep only valid fields</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">validate_model</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span><span class="n">_fields_set</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="c1"># parse a dict or another pydantic model</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_obj</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="metador_core.schema.partial.PartialModel.cast" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">cast</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#metador_core.schema.partial.PartialModel.cast" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">cast</span><span class="p">(</span>
    <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">PartialModel</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">ignore_invalid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Cast given object into this partial model if needed.</p>
<p>If it already is an instance, will do nothing.
Otherwise, will call <code>to_partial</code>.</p>

          <details class="quote">
            <summary>Source code in <code>src/metador_core/schema/partial.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">cast</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">PartialModel</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">ignore_invalid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cast given object into this partial model if needed.</span>

<span class="sd">    If it already is an instance, will do nothing.</span>
<span class="sd">    Otherwise, will call `to_partial`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">to_partial</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ignore_invalid</span><span class="o">=</span><span class="n">ignore_invalid</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="metador_core.schema.partial.PartialModel.merge_with" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">merge_with</span>


<a href="#metador_core.schema.partial.PartialModel.merge_with" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">merge_with</span><span class="p">(</span>
    <span class="n">obj</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">ignore_invalid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">allow_overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Return a new partial model with updated fields (without validation).</p>
<p>Raises <code>ValidationError</code> if passed <code>obj</code> is not suitable,
unless <code>ignore_invalid</code> is set to <code>True</code>.</p>
<p>Raises <code>ValueError</code> if <code>allow_overwrite=False</code> and a value would be overwritten.</p>

          <details class="quote">
            <summary>Source code in <code>src/metador_core/schema/partial.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">merge_with</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">obj</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">ignore_invalid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">allow_overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a new partial model with updated fields (without validation).</span>

<span class="sd">    Raises `ValidationError` if passed `obj` is not suitable,</span>
<span class="sd">    unless `ignore_invalid` is set to `True`.</span>

<span class="sd">    Raises `ValueError` if `allow_overwrite=False` and a value would be overwritten.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_path</span> <span class="o">=</span> <span class="n">_path</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ignore_invalid</span><span class="o">=</span><span class="n">ignore_invalid</span><span class="p">)</span>  <span class="c1"># raises on failure</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
    <span class="k">for</span> <span class="n">f_name</span><span class="p">,</span> <span class="n">v_new</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__partial_fac__</span><span class="o">.</span><span class="n">_get_field_vals</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="n">v_old</span> <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f_name</span><span class="p">)</span>
        <span class="n">v_merged</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_field</span><span class="p">(</span>
            <span class="n">v_old</span><span class="p">,</span> <span class="n">v_new</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">_path</span> <span class="o">+</span> <span class="p">[</span><span class="n">f_name</span><span class="p">],</span> <span class="n">allow_overwrite</span><span class="o">=</span><span class="n">allow_overwrite</span>
        <span class="p">)</span>
        <span class="n">ret</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">f_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v_merged</span>
    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="metador_core.schema.partial.PartialModel.merge" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">merge</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#metador_core.schema.partial.PartialModel.merge" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">merge</span><span class="p">(</span>
    <span class="o">*</span><span class="n">objs</span><span class="p">:</span> <span class="n">PartialModel</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">PartialModel</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartialModel</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Merge all passed partial models in given order using <code>merge_with</code>.</p>

          <details class="quote">
            <summary>Source code in <code>src/metador_core/schema/partial.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">objs</span><span class="p">:</span> <span class="n">PartialModel</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartialModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Merge all passed partial models in given order using `merge_with`.&quot;&quot;&quot;</span>
    <span class="c1"># sadly it looks like *args and named kwargs (,*,) syntax cannot be mixed</span>
    <span class="n">ignore_invalid</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ignore_invalid&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">allow_overwrite</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;allow_overwrite&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">objs</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">merge_two</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">merge_with</span><span class="p">(</span>
            <span class="n">y</span><span class="p">,</span> <span class="n">ignore_invalid</span><span class="o">=</span><span class="n">ignore_invalid</span><span class="p">,</span> <span class="n">allow_overwrite</span><span class="o">=</span><span class="n">allow_overwrite</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">reduce</span><span class="p">(</span><span class="n">merge_two</span><span class="p">,</span> <span class="n">objs</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="metador_core.schema.partial.PartialFactory" class="doc doc-heading">
          <span class="doc doc-object-name doc-class-name">PartialFactory</span>


<a href="#metador_core.schema.partial.PartialFactory" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Factory class to create and manage partial models.</p>

            <details class="quote">
              <summary>Source code in <code>src/metador_core/schema/partial.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PartialFactory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Factory class to create and manage partial models.&quot;&quot;&quot;</span>

    <span class="n">base_model</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">BaseModel</span>
    <span class="n">partial_mixin</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">PartialModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">PartialModel</span>

    <span class="c1"># TODO: how to configure the whole partial family</span>
    <span class="c1"># with default parameters for merge() efficiently?</span>
    <span class="c1"># ----</span>
    <span class="c1"># default arguments for merge (if not explicitly passed)</span>
    <span class="c1"># allow_overwrite: bool = False</span>
    <span class="c1"># &quot;&quot;&quot;Default argument for merge() of partials.&quot;&quot;&quot;</span>

    <span class="c1"># ignore_invalid: bool = False</span>
    <span class="c1"># &quot;&quot;&quot;Default argument for merge() of partials.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_is_base_subclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># not a class (probably just a hint)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">base_model</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># not a suitable model</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_partial_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mcls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return class name for partial of model `mcls`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mcls</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">partial_mixin</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_partial_forwardref_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mcls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return ForwardRef string for partial of model `mcls`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;__</span><span class="si">{</span><span class="n">mcls</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_partial_name</span><span class="p">(</span><span class="n">mcls</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_get_field_vals</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return field values, excluding None and private fields.</span>

<span class="sd">        This is different from `BaseModel.dict` as it ignores the defined alias</span>
<span class="sd">        and is used here only for &quot;internal representation&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">is_public_name</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_nested_models</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">field_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">TypeHint</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Collect all compatible nested model classes (for which we need partials).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">cast</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span> <span class="n">h</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">th</span> <span class="ow">in</span> <span class="n">field_types</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">traverse_typehint</span><span class="p">(</span><span class="n">th</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_is_base_subclass</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_model_to_partial_fref</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">orig_type</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">TypeHint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">TypeHint</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Substitute type hint with forward reference to partial models.</span>

<span class="sd">        Will return unchanged type if passed argument is not suitable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_is_base_subclass</span><span class="p">(</span><span class="n">orig_type</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">orig_type</span>
        <span class="k">return</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_partial_forwardref_name</span><span class="p">(</span><span class="n">orig_type</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_model_to_partial</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">mcls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">PartialModel</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Substitute a model class with partial model.</span>

<span class="sd">        Will return unchanged type if argument not suitable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_partial</span><span class="p">(</span><span class="n">mcls</span><span class="p">)</span> <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_is_base_subclass</span><span class="p">(</span><span class="n">mcls</span><span class="p">)</span> <span class="k">else</span> <span class="n">mcls</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_partial_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">orig_type</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">TypeHint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">TypeHint</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a field type hint into a type hint for the partial.</span>

<span class="sd">        This will make the field optional and also replace all nested models</span>
<span class="sd">        derived from the configured base_model with the respective partial model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">map_typehint</span><span class="p">(</span><span class="n">orig_type</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_model_to_partial_fref</span><span class="p">)]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_partial_field</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">orig_type</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">TypeHint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">FieldInfo</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a field declaration tuple for dynamic model creation.&quot;&quot;&quot;</span>
        <span class="n">th</span><span class="p">,</span> <span class="n">fi</span> <span class="o">=</span> <span class="n">orig_type</span><span class="p">,</span> <span class="kc">None</span>

        <span class="c1"># if pydantic Field is added (in an Annotated[...]) - unwrap</span>
        <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">get_origin</span><span class="p">(</span><span class="n">orig_type</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Annotated</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">get_args</span><span class="p">(</span><span class="n">orig_type</span><span class="p">)</span>
            <span class="n">th</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">ann</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ann</span><span class="p">,</span> <span class="n">FieldInfo</span><span class="p">),</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]),</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">pth</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_partial_type</span><span class="p">(</span><span class="n">th</span><span class="p">)</span>  <span class="c1"># map the (unwrapped) type to optional</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">pth</span><span class="p">,</span> <span class="n">fi</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_create_base_partial</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">PartialBaseModel</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">partial_mixin</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">base_model</span><span class="p">):</span>
            <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
                <span class="n">frozen</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># make sure it&#39;s hashable</span>

        <span class="k">return</span> <span class="n">PartialBaseModel</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_create_partial</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mcls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">typehints</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new partial model class based on `mcls`.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_is_base_subclass</span><span class="p">(</span><span class="n">mcls</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mcls</span><span class="si">}</span><span class="s2"> is not subclass of </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">base_model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mcls</span> <span class="ow">is</span> <span class="bp">cls</span><span class="o">.</span><span class="n">base_model</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_create_base_partial</span><span class="p">(),</span> <span class="p">[])</span>
        <span class="c1"># ----</span>
        <span class="c1"># get field type annotations (or use the passed ones / for performance)</span>
        <span class="n">hints</span> <span class="o">=</span> <span class="n">typehints</span> <span class="ow">or</span> <span class="n">t</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span><span class="n">mcls</span><span class="p">)</span>
        <span class="n">field_types</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">hints</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mcls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">}</span>
        <span class="c1"># get dependencies that must be substituted</span>
        <span class="n">missing_partials</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_nested_models</span><span class="p">(</span><span class="n">field_types</span><span class="p">)</span>
        <span class="c1"># compute new field types</span>
        <span class="n">new_fields</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_partial_field</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">field_types</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="c1"># replace base classes with corresponding partial bases</span>
        <span class="n">new_bases</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_model_to_partial</span><span class="p">,</span> <span class="n">mcls</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">))</span>
        <span class="c1"># create partial model</span>
        <span class="n">ret</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">PartialModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_partial_name</span><span class="p">(</span><span class="n">mcls</span><span class="p">),</span>
            <span class="n">__base__</span><span class="o">=</span><span class="n">new_bases</span><span class="p">,</span>
            <span class="vm">__module__</span><span class="o">=</span><span class="n">mcls</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span>
            <span class="n">__validators__</span><span class="o">=</span><span class="n">mcls</span><span class="o">.</span><span class="n">__validators__</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="o">**</span><span class="n">new_fields</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ret</span><span class="o">.</span><span class="n">__partial_src__</span> <span class="o">=</span> <span class="n">mcls</span>  <span class="c1"># connect to original model</span>
        <span class="n">ret</span><span class="o">.</span><span class="n">__partial_fac__</span> <span class="o">=</span> <span class="bp">cls</span>  <span class="c1"># connect to this class</span>
        <span class="c1"># ----</span>
        <span class="k">return</span> <span class="n">ret</span><span class="p">,</span> <span class="n">missing_partials</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_partial</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mcls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">typehints</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a partial schema with all fields of the given schema optional.</span>

<span class="sd">        Original default values are not respected and are set to `None`.</span>

<span class="sd">        The use of the returned class is for validating partial data before</span>
<span class="sd">        zipping together partial results into a completed one.</span>

<span class="sd">        This is a much more fancy version of e.g.</span>
<span class="sd">        https://github.com/pydantic/pydantic/issues/1799</span>

<span class="sd">        because it recursively substitutes with partial models.</span>
<span class="sd">        This allows us to implement smart deep merge for partials.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_partials</span><span class="p">:</span>  <span class="c1"># first use of this partial factory</span>
            <span class="n">_partials</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">_forwardrefs</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">partial</span> <span class="o">:=</span> <span class="n">_partials</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">mcls</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">partial</span>  <span class="c1"># already have a partial</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># block the spot (to break recursion)</span>
            <span class="n">_partials</span><span class="p">[</span><span class="bp">cls</span><span class="p">][</span><span class="n">mcls</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># ----</span>
        <span class="c1"># create a partial for a model:</span>
        <span class="c1"># localns = {cls._partial_forwardref_name(k): v for k,v in _partials[cls].items() if v}</span>
        <span class="n">localns</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">mcls</span><span class="o">.</span><span class="n">update_forward_refs</span><span class="p">(</span><span class="o">**</span><span class="n">localns</span><span class="p">)</span>  <span class="c1"># to be sure</span>

        <span class="n">partial</span><span class="p">,</span> <span class="n">nested</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create_partial</span><span class="p">(</span><span class="n">mcls</span><span class="p">,</span> <span class="n">typehints</span><span class="o">=</span><span class="n">typehints</span><span class="p">)</span>
        <span class="n">partial_ref</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_partial_forwardref_name</span><span class="p">(</span><span class="n">mcls</span><span class="p">)</span>
        <span class="c1"># store result</span>
        <span class="n">_forwardrefs</span><span class="p">[</span><span class="bp">cls</span><span class="p">][</span><span class="n">partial_ref</span><span class="p">]</span> <span class="o">=</span> <span class="n">partial</span>
        <span class="n">_partials</span><span class="p">[</span><span class="bp">cls</span><span class="p">][</span><span class="n">mcls</span><span class="p">]</span> <span class="o">=</span> <span class="n">partial</span>
        <span class="c1"># create partials for nested models</span>
        <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">nested</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">get_partial</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="c1"># resolve possible circular references</span>
        <span class="n">partial</span><span class="o">.</span><span class="n">update_forward_refs</span><span class="p">(</span><span class="o">**</span><span class="n">_forwardrefs</span><span class="p">[</span><span class="bp">cls</span><span class="p">])</span>  <span class="c1"># type: ignore</span>
        <span class="c1"># ----</span>
        <span class="k">return</span> <span class="n">partial</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="metador_core.schema.partial.PartialFactory.get_partial" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">get_partial</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#metador_core.schema.partial.PartialFactory.get_partial" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">get_partial</span><span class="p">(</span>
    <span class="n">mcls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">typehints</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Return a partial schema with all fields of the given schema optional.</p>
<p>Original default values are not respected and are set to <code>None</code>.</p>
<p>The use of the returned class is for validating partial data before
zipping together partial results into a completed one.</p>
<p>This is a much more fancy version of e.g.
<a href="https://github.com/pydantic/pydantic/issues/1799">https://github.com/pydantic/pydantic/issues/1799</a></p>
<p>because it recursively substitutes with partial models.
This allows us to implement smart deep merge for partials.</p>

          <details class="quote">
            <summary>Source code in <code>src/metador_core/schema/partial.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_partial</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mcls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">typehints</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a partial schema with all fields of the given schema optional.</span>

<span class="sd">    Original default values are not respected and are set to `None`.</span>

<span class="sd">    The use of the returned class is for validating partial data before</span>
<span class="sd">    zipping together partial results into a completed one.</span>

<span class="sd">    This is a much more fancy version of e.g.</span>
<span class="sd">    https://github.com/pydantic/pydantic/issues/1799</span>

<span class="sd">    because it recursively substitutes with partial models.</span>
<span class="sd">    This allows us to implement smart deep merge for partials.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">cls</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_partials</span><span class="p">:</span>  <span class="c1"># first use of this partial factory</span>
        <span class="n">_partials</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">_forwardrefs</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">partial</span> <span class="o">:=</span> <span class="n">_partials</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">mcls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">partial</span>  <span class="c1"># already have a partial</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># block the spot (to break recursion)</span>
        <span class="n">_partials</span><span class="p">[</span><span class="bp">cls</span><span class="p">][</span><span class="n">mcls</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># ----</span>
    <span class="c1"># create a partial for a model:</span>
    <span class="c1"># localns = {cls._partial_forwardref_name(k): v for k,v in _partials[cls].items() if v}</span>
    <span class="n">localns</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">mcls</span><span class="o">.</span><span class="n">update_forward_refs</span><span class="p">(</span><span class="o">**</span><span class="n">localns</span><span class="p">)</span>  <span class="c1"># to be sure</span>

    <span class="n">partial</span><span class="p">,</span> <span class="n">nested</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create_partial</span><span class="p">(</span><span class="n">mcls</span><span class="p">,</span> <span class="n">typehints</span><span class="o">=</span><span class="n">typehints</span><span class="p">)</span>
    <span class="n">partial_ref</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_partial_forwardref_name</span><span class="p">(</span><span class="n">mcls</span><span class="p">)</span>
    <span class="c1"># store result</span>
    <span class="n">_forwardrefs</span><span class="p">[</span><span class="bp">cls</span><span class="p">][</span><span class="n">partial_ref</span><span class="p">]</span> <span class="o">=</span> <span class="n">partial</span>
    <span class="n">_partials</span><span class="p">[</span><span class="bp">cls</span><span class="p">][</span><span class="n">mcls</span><span class="p">]</span> <span class="o">=</span> <span class="n">partial</span>
    <span class="c1"># create partials for nested models</span>
    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">nested</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">get_partial</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
    <span class="c1"># resolve possible circular references</span>
    <span class="n">partial</span><span class="o">.</span><span class="n">update_forward_refs</span><span class="p">(</span><span class="o">**</span><span class="n">_forwardrefs</span><span class="p">[</span><span class="bp">cls</span><span class="p">])</span>  <span class="c1"># type: ignore</span>
    <span class="c1"># ----</span>
    <span class="k">return</span> <span class="n">partial</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>



<div class="doc doc-object doc-function">



<h2 id="metador_core.schema.partial.is_mergeable_type" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">is_mergeable_type</span>


<a href="#metador_core.schema.partial.is_mergeable_type" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">is_mergeable_type</span><span class="p">(</span><span class="n">hint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Return whether given type can be deeply merged.</p>
<p>This imposes some constraints on the shape of valid hints.</p>

          <details class="quote">
            <summary>Source code in <code>src/metador_core/schema/partial.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_mergeable_type</span><span class="p">(</span><span class="n">hint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return whether given type can be deeply merged.</span>

<span class="sd">    This imposes some constraints on the shape of valid hints.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_check_type_mergeable</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="metador_core.schema.partial.val_from_partial" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">val_from_partial</span>


<a href="#metador_core.schema.partial.val_from_partial" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">val_from_partial</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Recursively convert back from a partial model if val is one.</p>

          <details class="quote">
            <summary>Source code in <code>src/metador_core/schema/partial.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">val_from_partial</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Recursively convert back from a partial model if val is one.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">PartialModel</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">val</span><span class="o">.</span><span class="n">from_partial</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">val_from_partial</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">val_from_partial</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">val</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">val</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../parser/" class="md-footer__link md-footer__link--prev" aria-label="Previous: parser" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                parser
              </div>
            </div>
          </a>
        
        
          
          <a href="../pg/" class="md-footer__link md-footer__link--next" aria-label="Next: pg" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                pg
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!-- Copyright and theme information -->
<div class="md-copyright">
  
  
    Made with
    <a
      href="https://squidfunk.github.io/mkdocs-material/"
      target="_blank" rel="noopener"
    >
      Material for MkDocs
    </a>
    <!-- added link to project template -->
    and
    <a
      href="https://github.com/Materials-Data-Science-and-Informatics/fair-python-cookiecutter"
      target="_blank" rel="noopener"
    >
      fair-python-cookiecutter
    </a>
    <!-- ------------------------------ -->
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Materials-Data-Science-and-Informatics" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/Materials-Data-Science-and-Informatics" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.4c2.2 20.4 3.3 41.8 3.3 64zm28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7zm-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6zM8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zm186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6h116.7zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.6z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["content.action.edit", "content.action.view", "content.code.annotate", "header.autohide", "navigation.footer", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.top", "search.highlight", "search.suggest"], "search": "../../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>